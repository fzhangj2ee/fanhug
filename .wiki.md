# Project Summary
FanHug is a web application designed to enhance the live sports betting experience through a user-friendly interface. It allows users to register via email/password or OAuth2 social accounts and integrates with Stripe for secure payments. The application utilizes The Odds API for real-time betting data, offering features such as automated bet grading, live updates, an admin dashboard for user management, and a play money feature for risk-free exploration, promoting responsible gaming.

# Project Module Description
- **Authentication System**: 
  - Supports email/password and OAuth2 social login.
  - Manages sessions and secure routes.
  - Enables user profile management.

- **Payment Processing**: 
  - Integrates with Stripe for secure transactions.
  - Provides transaction history and confirmations.

- **Live Betting**: 
  - Offers real-time odds and score updates.
  - User-friendly interface for placing bets.
  - Automates grading of bets only after games finish.

- **User Profile Management**: 
  - Accessible from the user icon dropdown.
  - Displays and allows editing of user information.

- **Admin Dashboard**:
  - Lists all registered users with detailed views.
  - Manages user data and betting activity.

- **User Messaging System**:
  - Users can send messages to admins.
  - Admins can view messages with read/unread indicators.

- **Donation Page**:
  - Allows users to donate to support responsible gaming initiatives.

- **Bet Slip Management**:
  - Supports accumulation of multiple bets.
  - Recent bets show in "My Bets" after placement.

- **Password Reset Flow**:
  - Allows users to request a password reset.

- **Play Money Component**:
  - Renders a visual distinction for play money.

- **Wallet Page Update**:
  - Maintains balance display and transaction history.

- **Bet Time Display and Sorting**:
  - Shows game start times and sorts bets in reverse chronological order.

- **Automatic Bet Grading**:
  - Automatically grades bets every 120 seconds, ensuring proper validation.

- **Data Migration to Supabase**:
  - Migrated betting data for improved persistence.

- **Navbar Enhancements**:
  - Improved layout for admin users.

- **Google OAuth Fix**:
  - Handles OAuth redirects to prevent errors.

- **Odds API Key Configuration**:
  - Updated to use environment variables for configuration.

- **About FanHug Page**:
  - Simplified layout focusing on core information.

- **Bet Placement Balance Check**:
  - Ensures wallet balance is checked before placing bets.

- **Debugging for Wallet Balance Check**:
  - Added extensive logging to diagnose issues with balance checks during bet placement.

- **Tag Listing Feature**:
  - Introduced functionality to list Git tags created by users.

- **Environment Setup Instructions**:
  - Guidance for creating a `.env.local` file for Supabase credentials and Odds API key.

- **Critical Wallet Balance Check Bug**:
  - Resolved type mismatch in wallet balance comparison logic.

- **Defensive Checks in Betting Context**:
  - Added checks to prevent errors related to undefined arrays during operations.

- **Database Schema Update**:
  - Added `placed_at` column to bets table for accurate bet placement timing.

- **LiveOddsProvider Context Error**:
  - Added a safe hook variant to prevent errors when using `useLiveOdds()` outside its provider.

- **Odds Display Issue Fix**:
  - Resolved issues with displaying odds by reverting to decimal odds format as per user preference.

# Directory Tree
```
shadcn-ui/
├── README.md               # Project overview and setup instructions
├── AUTHENTICATION_SETUP.md  # Instructions for setting up authentication
├── SUPABASE_SETUP.md       # Guide for applying Supabase policies
├── components.json         # Component definitions
├── eslint.config.js        # ESLint configuration
├── index.html              # Main HTML file with updated branding
├── package.json            # Project dependencies and scripts
├── postcss.config.js       # PostCSS configuration
├── public/                 # Public assets
│   ├── favicon.svg         # Favicon for the application
│   ├── images/             # Directory for image assets
│   │   └── FanHug.png      # Updated logo image for the application
│   └── robots.txt          # Robots.txt for SEO
├── src/                    # Source code
│   ├── App.css             # Global styles
│   ├── App.tsx             # Main application component
│   ├── components/         # UI components
│   ├── contexts/           # Context providers for state management
│   ├── hooks/              # Custom hooks
│   ├── lib/                # Library functions
│   ├── pages/              # Application pages
│   │   ├── About.tsx       # Updated About page for FanHug
│   │   ├── Admin.tsx       # Admin dashboard for user management
│   │   ├── AuthCallback.tsx # OAuth callback handling
│   │   ├── Donation.tsx    # Updated Donation page
│   │   ├── Index.tsx       # Homepage with live betting features
│   │   ├── Live.tsx        # New page for live betting
│   │   ├── Login.tsx       # User login page
│   │   ├── Messages.tsx    # Page for viewing user messages
│   │   ├── MyBets.tsx      # Page for user’s betting history
│   │   ├── PlayMoney.tsx   # Component for rendering play money
│   │   ├── Profile.tsx     # User profile page
│   │   ├── ResetPassword.tsx # Page for requesting password reset
│   │   ├── UpdatePassword.tsx # Page for setting new password
│   │   ├── Signup.tsx      # User signup page
│   │   └── Wallet.tsx      # Page for user's wallet and transaction history
│   └── main.tsx            # Entry point for the React application
├── supabase-schema.sql     # SQL schema for Supabase betting and messages tables
├── tailwind.config.ts      # Tailwind CSS configuration
├── tsconfig.json           # TypeScript configuration
├── vite.config.ts          # Vite configuration
├── .env                    # Environment variables for dynamic versioning
└── .timeline.json          # Timeline tracking file (system file)
└── src/contexts/BettingContext.tsx # Updated betting context with improved grading logic
└── src/contexts/MessagesContext.tsx # New context for managing messages
└── src/components/MessageHistory.tsx # New component for displaying user's message history
```

# File Description Inventory
- **README.md**: Project details and setup instructions.
- **AUTHENTICATION_SETUP.md**: Guide for setting up authentication.
- **SUPABASE_SETUP.md**: Instructions for applying RLS policies in Supabase.
- **index.html**: Main HTML file for the React application.
- **package.json**: Lists project dependencies and scripts.
- **src/**: Contains all source code, including components, contexts, and pages.
- **public/**: Holds static assets like the favicon and the updated logo.
- **src/pages/**: Various application pages including homepage, live betting, login, signup, My Bets, Wallet, Admin, Donation, Reset Password, Update Password, Messages, and the updated About page.
- **src/lib/**: Library functions for API integrations.
- **src/contexts/**: Context providers for managing application state.

# Technology Stack
- **Frontend**: React, TypeScript, Tailwind CSS
- **Backend**: Supabase, Stripe
- **APIs**: Odds API

# Usage
To get started with the project, follow these steps:
1. Clone the repository.
2. Install dependencies using the package manager.
3. Create a `.env.local` file and configure your environment variables, including the Odds API key.
4. Build and run the application.
