# Project Summary
FanHug is an innovative web application that enhances the live sports betting experience through a user-friendly interface. It allows users to register and log in using email/password or OAuth2 social media accounts. The platform integrates with Stripe for secure payment processing and The Odds API for real-time betting data, automating bet grading and providing live updates. An admin dashboard facilitates user management, while a play money feature allows users to explore functionalities without financial risk. The platform emphasizes responsible gaming and community support, with a recent focus on transparency regarding operational costs.

# Project Module Description
- **Authentication System**: 
  - Supports email/password and OAuth2 social login.
  - Manages sessions and secured routes.
  - Enables user profile management with enhanced error handling.

- **Payment Processing**: 
  - Integrates with Stripe for secure transactions.
  - Provides transaction history and confirmations.

- **Live Betting**: 
  - Offers real-time odds and score updates.
  - User-friendly interface for placing bets.
  - Automates grading of bets.
  - Includes a "Live" page for ongoing games.

- **User Profile Management**: 
  - Accessible from the user icon dropdown.
  - Displays and allows editing of user information.
  - Shows account details and betting statistics.

- **Admin Dashboard**:
  - Available to designated admin users.
  - Lists all registered users with detailed views, including win/loss statistics and current bets.
  - Provides functionality to manage user data and betting activity.
  - Includes a "Messages" section for viewing user messages.

- **User Messaging System**:
  - Users can send messages to admins through a dedicated form.
  - Admins can view messages in a table interface, with indicators for read/unread status.
  - Displays users' message history.

- **Donation Page**:
  - Allows users to donate to support responsible gaming initiatives.
  - Now includes transparency about monthly operational costs, including updated references to "MGX.dev tools subscription".
  - Fixed PayPal functionality with an updated link format and security parameters.

- **Bet Slip Management**:
  - Supports accumulation of multiple bets, now scrollable to enhance user experience.
  - Includes a "Clear All" button to remove all bets at once.

- **Password Reset Flow**:
  - Allows users to request a password reset email and set a new password.

- **Play Money Component**:
  - Renders a visual distinction for play money, now with improved spacing and clickable navigation to the Wallet page.

- **Wallet Page Update**:
  - The "Add Funds" button has been removed from the Wallet page, maintaining the balance display and transaction history functionality.

- **Bet Time Display and Sorting**:
  - All betting-related displays now show game start times and sort bets in reverse chronological order.

- **Automatic Bet Grading**:
  - New functionality added to automatically grade bets every 60 seconds by checking completed games from The Odds API.

- **Data Migration to Supabase**:
  - Migrated betting data from localStorage to Supabase for improved data persistence and cross-device access.

- **Navbar Enhancements**:
  - Admin users now see both "Messages" and "Admin" tabs in the center navigation, with an unread count badge for messages.
  - The donation button in the navbar now displays only a heart icon for a cleaner look.
  - The logo now navigates to the new "About FanHug" page.

- **Google OAuth Fix**:
  - Added an `AuthCallback` component to handle OAuth redirects and prevent 404 errors after Google login.

- **Odds API Key Update**:
  - Updated the Odds API key to ensure continued functionality and prevent quota issues.

- **About FanHug Page**:
  - Simplified to feature the introductory text, five benefit cards, and a "Start Betting for Free" button, while removing unnecessary sections for a cleaner look.

# Directory Tree
```
shadcn-ui/
├── README.md               # Project overview and setup instructions
├── AUTHENTICATION_SETUP.md  # Instructions for setting up authentication
├── SUPABASE_SETUP.md       # Step-by-step guide for applying Supabase policies
├── components.json         # Component definitions
├── eslint.config.js        # ESLint configuration
├── index.html              # Main HTML file with updated branding
├── package.json            # Project dependencies and scripts
├── postcss.config.js       # PostCSS configuration
├── public/                 # Public assets
│   ├── favicon.svg         # Favicon for the application
│   ├── images/             # Directory for image assets
│   │   └── FanHug.png      # Updated logo image for the application
│   └── robots.txt          # Robots.txt for SEO
├── src/                    # Source code
│   ├── App.css             # Global styles
│   ├── App.tsx             # Main application component with routing and layout adjustments
│   ├── components/         # UI components
│   ├── contexts/           # Context providers for state management
│   ├── hooks/              # Custom hooks
│   ├── lib/                # Library functions, including API integrations
│   ├── pages/              # Application pages
│   │   ├── About.tsx       # Updated About page for FanHug
│   │   ├── Admin.tsx       # Admin dashboard for user management and messages
│   │   ├── AuthCallback.tsx # OAuth callback handling
│   │   ├── Donation.tsx    # Updated Donation page for supporting the mission
│   │   ├── Index.tsx       # Homepage with live betting features and new layout
│   │   ├── Live.tsx        # New page for live betting
│   │   ├── Login.tsx       # User login page
│   │   ├── Messages.tsx    # Page for viewing user messages
│   │   ├── MyBets.tsx      # Page for user’s betting history
│   │   ├── PlayMoney.tsx   # Component for rendering play money
│   │   ├── Profile.tsx     # User profile page
│   │   ├── ResetPassword.tsx # Page for requesting password reset
│   │   ├── UpdatePassword.tsx # Page for setting new password
│   │   ├── Signup.tsx      # User signup page
│   │   └── Wallet.tsx      # Page for user's wallet and transaction history
│   └── main.tsx            # Entry point for the React application
├── supabase-schema.sql     # SQL schema for Supabase betting and messages tables
├── tailwind.config.ts      # Tailwind CSS configuration
├── tsconfig.json           # TypeScript configuration
├── vite.config.ts          # Vite configuration with dynamic build number integration
├── .env                    # Environment variables for dynamic versioning
├── .timeline.json          # Timeline tracking file (system file)
└── src/contexts/BettingContext.tsx # Updated betting context with Supabase integration
└── src/contexts/MessagesContext.tsx # New context for managing messages
└── src/components/MessageHistory.tsx # New component for displaying user's message history
└── src/lib/sportsApi.ts    # Updated with new Odds API key
```

# File Description Inventory
- **README.md**: Project details and setup instructions.
- **AUTHENTICATION_SETUP.md**: Guide for setting up authentication with Supabase.
- **SUPABASE_SETUP.md**: Instructions for applying RLS policies in Supabase.
- **index.html**: Main HTML file for the React application, updated with new branding.
- **package.json**: Lists project dependencies and scripts.
- **src/**: Contains all source code, including components, contexts, and pages.
- **public/**: Holds static assets like the favicon and the updated logo.
- **src/pages/**: Various application pages including homepage, live betting, login, signup, My Bets, Wallet, Admin, Donation, Reset Password, Update Password, Messages, and the updated About page.
- **src/lib/**: Library functions for API integrations, including Supabase and The Odds API.
- **src/contexts/**: Context providers for managing application state, including updated BettingContext and new MessagesContext.
- **src/components/**: UI components, including updated betting components and Navbar with clickable play money balance.
- **src/hooks/**: Custom hooks for accessing authentication context.
- **supabase-schema.sql**: SQL schema for creating the betting and messages tables in Supabase with necessary RLS policies.
- **.env**: Contains environment variables, including the dynamic version number for the application.
- **.timeline.json**: A hidden system file managed by the MGX platform that tracks build numbers and other metadata. It is referenced in `vite.config.ts` and is automatically updated with each build.

# Technology Stack
- **React**: Frontend library for building user interfaces.
- **TypeScript**: Superset of JavaScript for type safety.
- **Tailwind CSS**: Utility-first CSS framework for styling.
- **Vite**: Build tool for fast development and optimized production builds.
- **Stripe**: Payment processing platform for secure transactions.
- **Supabase**: Backend as a service for authentication and database management.
- **The Odds API**: For fetching real-time sports odds.
- **MGX**: Platform for deployment and hosting.

# Usage
1. **Install Dependencies**: Run the command to install all required packages.
2. **Build the Project**: Use the build command to compile the application.
3. **Run the Application**: Start the development server to preview the application.
4. **Setup Environment**: Create a `.env.local` file with the necessary environment variables.
5. **Deployment**: For deployment, contact MGX support if the publish button is not visible, or consider alternative platforms temporarily. Ensure the `.env` file changes are included in the build and deployment process. After building, make sure to republish to reflect the latest changes.
